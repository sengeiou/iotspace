webpackJsonp([33],{"+UKj":function(e,t){},kwkn:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l={components:{serchMap:a("P7/C").a},filters:{formatDate:function(e){var t=new Date(e),a=t.getFullYear(),l=t.getMonth()+1,r=t.getDate(),n=t.getHours(),o=t.getMinutes();return l<10&&(l="0"+l),n<10&&(n="0"+n),o<10&&(o="0"+o),a+"-"+l+"-"+r}},data:()=>({page:1,pageSize:10,totalNum:100,form:{item:null},addOrUpTit:"",addForm:{name:null,username:null,phone:null,type:null,code:null,address:"未选择",department:null,departmentphone:null,dealtype:null,time:null,province:null,city:null,plat:null},tableData:[],multipleSelection:[],centerDialogVisible:!1,innerVisible:!1,endPickerOptions:{disabledDate:e=>e.getTime()<Date.now()-864e5},allProvince:[],procityplat:"未选择-未选择-未选择"}),mounted(){this.getData(),this.getAddressData()},methods:{getSerchData(e){console.log(e),this.addForm.address=e.address,this.procityplat=e.addressComponents.province+"-"+e.addressComponents.city+"-"+e.addressComponents.district,this.addForm.province=e.addressComponents.province,this.addForm.city=e.addressComponents.city,this.addForm.plat=e.addressComponents.district},getAddressData(){var e=this;this.$ajax.get("../../../static/json/allprovince.json").then(function(t){console.log(t),e.allProvince=t.data})},getData(){var e=this;this.$ajax.get("/recovery/nterprise/selectByPage",{params:{page:this.page,rows:this.pageSize,name:this.form.item}}).then(function(t){console.log(t),260==t.data.status?(e.tableData=t.data.list,e.totalNum=t.data.info.total):(e.tableData=[],e.totalNum=0)})},changePage(e){this.page=e,this.getData()},selectList(){this.page=1,this.getData()},clearForm(){this.addForm={id:null,name:null,username:null,phone:null,type:null,code:null,address:"未选择",department:null,departmentphone:null,dealtype:null,time:null,province:null,city:null,plat:null}},clickAddOrUp(){this.centerDialogVisible=!0,this.addOrUpTit="创建企业",this.clearForm()},handleEdit(e,t){console.log(e,t);this.centerDialogVisible=!0,this.addOrUpTit="编辑企业",this.addForm={id:t.id,username:t.username,phone:t.phone,time:t.time,name:t.name,type:t.type,code:t.code,address:t.address,department:t.department,departmentphone:t.departmentphone,dealtype:t.dealtype,province:t.province,city:t.city,plat:t.plat},this.procityplat=t.province+"-"+t.city+"-"+t.plat},addSaveForm(){console.log(this.addForm);var e=this;if(null!=this.addForm.username&&null!=this.addForm.phone){var t=this.$qs.stringify(this.addForm,{indices:!1});"创建企业"==this.addOrUpTit?this.$ajax.post("/recovery/nterprise/insert",t).then(function(t){260==t.data.status&&(e.centerDialogVisible=!1,e.$message.success("添加成功"),e.getData(),e.clearForm())}):this.$ajax.put("/recovery/nterprise/update",t).then(function(t){260==t.data.status&&(e.centerDialogVisible=!1,e.$message.success("编辑成功"),e.getData(),e.clearForm())})}else this.$message.error("*为必填项！")},delAll(){if(this.multipleSelection.length<1)return this.$message.success("请先选择删除对象");this.$confirm("此操作将永久删除选中的省, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.multipleSelection.length==this.tableData.length&&(this.page=Number(this.page)-1);var e=this;this.$ajax.delete("/recovery/nterprise/deletes",{data:this.multipleSelection}).then(function(t){260==t.data.status&&(e.$message.success("删除成功"),e.getData())})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})},handleSelectionChange(e){this.multipleSelection=[];for(var t=0;t<e.length;t++)this.multipleSelection.push(e[t].id);console.log(this.multipleSelection)},handleDelete(e,t){this.$confirm("此操作将删除该省, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{console.log(e,t),1==this.tableData.length&&(this.page=Number(this.page)-1);var a=this;this.$ajax.delete("/recovery/nterprise/delete",{params:{id:t}}).then(function(e){260==e.data.status&&(a.$message.success("删除成功"),a.getData())})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"yudingBox"}},[a("div",{staticClass:"selectBox"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"企业名称"}},[a("el-input",{attrs:{placeholder:"请输入企业名称"},on:{change:e.selectList},model:{value:e.form.item,callback:function(t){e.$set(e.form,"item",t)},expression:"form.item"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"tableBox"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"企业名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"code",label:"统一社会信用代码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"法定代表人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"企业类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"dealtype",label:"处置种类"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"联系电话"}}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"地址"}}),e._v(" "),a("el-table-column",{attrs:{prop:"department",label:"认证部门"}}),e._v(" "),a("el-table-column",{attrs:{prop:"departmentphone",label:"部门电话"}}),e._v(" "),a("el-table-column",{attrs:{prop:"time",label:"公示时间",sortable:"",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e._f("formatDate")(t.row.time))+"\n              ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"pafinationBox"},[a("div",[a("el-button",{attrs:{type:"primary"},on:{click:e.clickAddOrUp}},[e._v("创建企业")]),e._v(" "),a("el-button",{attrs:{type:"warning"},on:{click:e.delAll}},[e._v("批量删除")])],1),e._v(" "),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":e.pageSize,total:e.totalNum},on:{"current-change":e.changePage}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.addOrUpTit,visible:e.centerDialogVisible,width:"800px",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("div",{staticClass:"dialogMain"},[a("el-form",{ref:"addForm",staticStyle:{width:"80%",margin:"0 auto"},attrs:{model:e.addForm,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"企业名称",required:""}},[a("el-input",{attrs:{placeholder:"请填写企业名称"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"统一社会信用代码",required:""}},[a("el-input",{attrs:{placeholder:"请填写统一社会信用代码"},model:{value:e.addForm.code,callback:function(t){e.$set(e.addForm,"code",t)},expression:"addForm.code"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"法定代表人",required:""}},[a("el-input",{attrs:{placeholder:"请填写法定代表人"},model:{value:e.addForm.username,callback:function(t){e.$set(e.addForm,"username",t)},expression:"addForm.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"企业类型",required:""}},[a("el-input",{attrs:{placeholder:"请填写企业类型"},model:{value:e.addForm.type,callback:function(t){e.$set(e.addForm,"type",t)},expression:"addForm.type"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"处置种类",required:""}},[a("el-input",{attrs:{placeholder:"请填写处置种类"},model:{value:e.addForm.dealtype,callback:function(t){e.$set(e.addForm,"dealtype",t)},expression:"addForm.dealtype"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电话",required:""}},[a("el-input",{attrs:{placeholder:"请填写电话"},model:{value:e.addForm.phone,callback:function(t){e.$set(e.addForm,"phone",t)},expression:"addForm.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"认证部门",required:""}},[a("el-input",{attrs:{placeholder:"请填写认证部门"},model:{value:e.addForm.department,callback:function(t){e.$set(e.addForm,"department",t)},expression:"addForm.department"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"部门电话",required:""}},[a("el-input",{attrs:{placeholder:"请填写部门电话"},model:{value:e.addForm.departmentphone,callback:function(t){e.$set(e.addForm,"departmentphone",t)},expression:"addForm.departmentphone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"公示时间",required:""}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy 年 MM 月 dd 日","value-format":"timestamp"},model:{value:e.addForm.time,callback:function(t){e.$set(e.addForm,"time",t)},expression:"addForm.time"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"省市区",required:""}},[a("span",[e._v(e._s(e.procityplat))])]),e._v(" "),a("el-form-item",{attrs:{label:"详细地址",required:""}},[a("span",[e._v(e._s(e.addForm.address))])]),e._v(" "),a("div",{staticStyle:{width:"100%",height:"300px"}},[a("serchMap",{on:{serchData:e.getSerchData}})],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.centerDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addSaveForm()}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var n=a("VU/8")(l,r,!1,function(e){a("+UKj")},"data-v-65e9ac98",null);t.default=n.exports}});
//# sourceMappingURL=33.357fef9dcae2ac15bd09.js.map