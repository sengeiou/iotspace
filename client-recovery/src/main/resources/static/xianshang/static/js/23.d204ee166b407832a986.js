webpackJsonp([23],{"n+Ck":function(t,e){},"ys0+":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l={components:{aliUpFile:a("2R99").a},data:()=>({userType:sessionStorage.getItem("userType"),page:1,currentPage:1,pageSize:10,totalNum:100,form:{item:"",leadername:"",type:"",level:"",code:"",phone:"",transportcompanyid:""},typeList:[],levelList:[],zancunList:[],tableData:[],lookImgIf:!1,imgLook:""}),mounted(){this.getData(),this.getSelectList()},methods:{upFileDatas(t){this.addForm.img=t},fileDels(t){this.addForm.img=""},lookImg(t){this.imgLook=t,this.lookImgIf=!0},lookDepartment(t){this.$router.replace({path:"/Department",query:{hospitalId:t}})},lookBarCode(t){this.$router.replace({path:"/barCode",query:{hospitalId:t}})},lookJoinList(t){this.$router.replace({path:"/treatmentPlantHospitalJoin",query:{name:t.name,id:t.id,transportcompanyid:this.form.transportcompanyid,flag:1}})},getSelectList(){var t=this,e={value:"",text:"全部"};this.$ajax.get("/recovery/hospital/typeList").then(function(a){console.log("type列表",a),t.typeList=a.data.list,t.typeList.unshift(e)});var a={id:"",name:"全部"};this.$ajax.get("/recovery/transportcompany/selectByTreatmentplantId",{params:{treatmentplantid:sessionStorage.getItem("belongId")}}).then(function(e){console.log("暂存点列表",e),t.zancunList=e.data.list,t.zancunList.unshift(a)})},getLevelList(t,e){1==e?(this.getData(),this.form.level=""):2==e&&(this.addForm.level=null);var a=this,l={value:"",text:"全部"};this.$ajax.get("/recovery/hospital/levelList",{params:{type:t}}).then(function(t){console.log("ji别列表",t),a.levelList=t.data.list,a.levelList.unshift(l)})},getData(){var t=this;this.$ajax.get("/recovery/hospital/selectByTreatmentplantId",{params:{page:this.page,rows:this.pageSize,name:this.form.item,type:this.form.type,level:this.form.level,treatmentplantid:sessionStorage.getItem("belongId"),transportcompanyid:this.form.transportcompanyid}}).then(function(e){console.log(e),260==e.data.status?(t.tableData=e.data.list,t.totalNum=e.data.info.total):(t.tableData=[],t.totalNum=0)})},changePage(t){this.page=t,this.getData()},selectList(){this.page=1,this.getData()},clearSelect(){this.form={item:"",transportcompanyid:"",type:"",level:""},this.getData()}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"yudingBox"}},[a("div",{staticClass:"selectBox"},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"医疗机构名称"}},[a("el-input",{on:{change:t.selectList},model:{value:t.form.item,callback:function(e){t.$set(t.form,"item",e)},expression:"form.item"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"回收物流"}},[a("el-select",{attrs:{placeholder:"请选择回收物流"},on:{change:t.selectList},model:{value:t.form.transportcompanyid,callback:function(e){t.$set(t.form,"transportcompanyid",e)},expression:"form.transportcompanyid"}},t._l(t.zancunList,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),a("el-form-item",[a("el-button",{staticStyle:{"font-size":"14px"},attrs:{type:"warning",size:"small"},on:{click:t.clearSelect}},[t._v("清空筛选")])],1)],1)],1),t._v(" "),a("div",{staticClass:"tableBox"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,height:"92%"}},[a("el-table-column",{attrs:{prop:"name",label:"名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"supervisionunit.name",label:"监管单位"}}),t._v(" "),a("el-table-column",{attrs:{prop:"belonglevel",label:"归属级别"}}),t._v(" "),a("el-table-column",{attrs:{prop:"code",label:"登记号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"type",label:"注册类型"}}),t._v(" "),a("el-table-column",{attrs:{prop:"level",label:"等级"}}),t._v(" "),a("el-table-column",{attrs:{prop:"leadername",label:"负责人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"leaderphone",label:"电话"}}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"地址"}}),t._v(" "),a("el-table-column",{attrs:{prop:"beds",label:"床位数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"执业许可证"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{width:"90px",height:"70px"},attrs:{src:e.row.img},on:{click:function(a){return t.lookImg(e.row.img)}}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",width:"220",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.lookJoinList(e.row)}}},[t._v("交接记录")]),t._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.lookDepartment(e.row.id)}}},[t._v("查看科室")])],1),t._v(" "),a("p",{staticStyle:{"margin-top":"5px"}},[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.lookBarCode(e.row.id)}}},[t._v("打印条码")])],1)]}}])})],1),t._v(" "),a("div",{staticClass:"pafinationBox"},[a("div"),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":t.pageSize,total:t.totalNum,"current-page":t.currentPage},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"current-change":t.changePage}})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"",visible:t.lookImgIf,width:"600px",center:""},on:{"update:visible":function(e){t.lookImgIf=e}}},[a("div",{staticClass:"dialogMain"},[a("img",{staticStyle:{width:"100%"},attrs:{src:t.imgLook}})])])],1)},staticRenderFns:[]};var i=a("VU/8")(l,o,!1,function(t){a("n+Ck")},"data-v-9cefe77a",null);e.default=i.exports}});
//# sourceMappingURL=23.d204ee166b407832a986.js.map