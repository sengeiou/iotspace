webpackJsonp([1],{"2FtQ":function(t,e){},ZvwH:function(t,e){},oiNC:function(t,e){},q02W:function(t,e){},vYpU:function(t,e){},vhdJ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7t+N"),i=a.n(s),r=a("XLwt"),o={props:["flag"],data:()=>({baiduIfMap:!1,arrayData:[{name:"中国",path:"static/json/china.json",level:"全国"},{name:"内蒙古",path:"static/json/province/neimenggu.json",level:"省级"},{name:"新疆",path:"static/json/province/xinjiang.json",level:"省级"},{name:"西藏",path:"static/json/province/xizang.json",level:"省级"},{name:"贵州",path:"static/json/province/guizhou.json",level:"省级"},{name:"青海",path:"static/json/province/qinghai.json",level:"省级"},{name:"宁夏",path:"static/json/province/ningxia.json",level:"省级"},{name:"甘肃",path:"static/json/province/gansu.json",level:"省级"},{name:"四川",path:"static/json/province/sichuan.json",level:"省级"},{name:"重庆",path:"static/json/province/chongqing.json",level:"市级"},{name:"重庆市",path:"static/json/province/chongqing.json",level:"市级"},{name:"广西",path:"static/json/province/guangxi.json",level:"省级"},{name:"广东",path:"static/json/province/guangdong.json",level:"省级"},{name:"福建",path:"static/json/province/fujian.json",level:"省级"},{name:"澳门",path:"static/json/province/aomen.json",level:"省级"},{name:"海南",path:"static/json/province/hainan.json",level:"省级"},{name:"香港",path:"static/json/province/xianggang.json",level:"省级"},{name:"湖南",path:"static/json/province/hunan.json",level:"省级"},{name:"江西",path:"static/json/province/jiangxi.json",level:"省级"},{name:"台湾",path:"static/json/province/taiwan.json",level:"省级"},{name:"安徽",path:"static/json/province/anhui.json",level:"省级"},{name:"湖北",path:"static/json/province/hubei.json",level:"省级"},{name:"河南",path:"static/json/province/henan.json",level:"省级"},{name:"河北",path:"static/json/province/hebei.json",level:"省级"},{name:"山西",path:"static/json/province/shanxi.json",level:"省级"},{name:"北京",path:"static/json/province/beijing.json",level:"市级"},{name:"北京市",path:"static/json/province/beijing.json",level:"市级"},{name:"天津",path:"static/json/province/tianjin.json",level:"市级"},{name:"天津市",path:"static/json/province/tianjin.json",level:"市级"},{name:"黑龙江",path:"static/json/province/heilongjiang.json",level:"省级"},{name:"吉林",path:"static/json/province/jilin.json",level:"省级"},{name:"辽宁",path:"static/json/province/liaoning.json",level:"省级"},{name:"山东",path:"static/json/province/shandong.json",level:"省级"},{name:"江苏",path:"static/json/province/jiangsu.json",level:"省级"},{name:"浙江",path:"static/json/province/zhejiang.json",level:"省级"},{name:"上海",path:"static/json/province/shanghai.json",level:"市级"},{name:"上海市",path:"static/json/province/shanghai.json",level:"市级"},{name:"云南",path:"static/json/province/yunnan.json",level:"省级"},{name:"陕西",path:"static/json/province/shanxi1.json",level:"省级"}],title:"",echartsData:[],chainPath:"/recovery/truckhospital/statisticProvincePlasticWeight",provincePath:"/recovery/truckhospital/statisticCityPlasticWeight",cityPath:"/recovery/truckhospital/statisticPlatPlasticWeight",platPath:"/recovery/truckhospital/statisticHospitalPlasticWeight",makerDetail:[],echartMap:null,getConfig:{addressName:null,json:null,url:null,params:null},index:null}),watch:{flag(t,e){var a;console.log("flag数据监听",t,e),"玻璃"==t?(this.chainPath="/recovery/truckhospital/statisticProvinceGlassWeight",this.provincePath="/recovery/truckhospital/statisticCityGlassWeight",this.cityPath="/recovery/truckhospital/statisticPlatGlassWeight",this.platPath="/recovery/truckhospital/statisticHospitalGlassWeight"):(this.chainPath="/recovery/truckhospital/statisticProvincePlasticWeight",this.provincePath="/recovery/truckhospital/statisticCityPlasticWeight",this.cityPath="/recovery/truckhospital/statisticPlatPlasticWeight",this.platPath="/recovery/truckhospital/statisticHospitalPlasticWeight"),"/recovery/truckhospital/statisticCityPlasticWeight"==this.getConfig.url||"/recovery/truckhospital/statisticCityGlassWeight"==this.getConfig.url?(a=this.provincePath,this.creatEchart(this.getConfig.addressName,this.getConfig.json,a,this.getConfig.params)):"/recovery/truckhospital/statisticPlatPlasticWeight"==this.getConfig.url||"/recovery/truckhospital/statisticPlatGlassWeight"==this.getConfig.url?(a=this.cityPath,this.creatEchart(this.getConfig.addressName,this.getConfig.json,a,this.getConfig.params)):"/recovery/truckhospital/statisticHospitalGlassWeight"==this.getConfig.url||"/recovery/truckhospital/statisticPlatGlassWeight"==this.getConfig.url?a=this.cityPath:"/recovery/truckhospital/statisticProvinceGlassWeight"!=this.getConfig.url&&"/recovery/truckhospital/statisticProvincePlasticWeight"!=this.getConfig.url||(a=this.chainPath,this.creatEchart(this.getConfig.addressName,this.getConfig.json,a,this.getConfig.params))}},mounted(){this.$nextTick(()=>{this.creatEchartMap(),this.getMapAdmin()})},methods:{creatEchartMap(){this.echartMap=r.init(document.getElementById("mainId"))},getMapAdmin(){sessionStorage.getItem("userType");var t=sessionStorage.getItem("userFatherAddress"),e=sessionStorage.getItem("userAddress"),a={},s=this;if(this.baiduIfMap=!1,"国家管理单位"==sessionStorage.getItem("userType"))this.echartsData=["中国"],this.creatEchart("中国","static/json/china.json",this.chainPath);else if("省管理单位"==sessionStorage.getItem("userType")&&"北京"!=e&&"上海"!=e&&"天津"!=e&&"重庆"!=e){var r;-1!=e.indexOf("省")?(r=e.substring(0,e.lastIndexOf("省")),console.log(r)):r=e;var o={address:(a=this.arrayData.find(function(t){return t.name===r})).name};this.echartsData=[r],this.creatEchart(r,a.path,this.provincePath,o)}else if("市管理单位"==sessionStorage.getItem("userType")||"北京"==e||"上海"==e||"天津"==e||"重庆"==e)if(console.log(e,t),-1!=e.indexOf("北京")||-1!=e.indexOf("天津")||-1!=e.indexOf("上海")||-1!=e.indexOf("重庆")){o={address:(a=this.arrayData.find(function(t){return t.name===e})).name};s.echartsData=[a.name],s.creatEchart(a.name,a.path,s.cityPath,o)}else if("济源市"==e){var n={name:e,level:"市级",father:t};s.getBaiduNews(e,t,n)}else a=this.arrayData.find(function(e){return e.name===t}),console.log("shi",a),i.a.getJSON(a.path,function(t){for(var a=0;a<t.features.length;a++)if(t.features[a].properties.name==e){var i=t.features[a].id,r={address:e};let o={name:e,path:"static/json/citys/"+i+".json",level:"市级"};s.arrayData.push(o),s.echartsData=[e],s.creatEchart(e,"static/json/citys/"+i+".json",s.cityPath,r)}});else if("区管理单位"==sessionStorage.getItem("userType")){console.log("asdasdasd");n={name:e,level:"县级",father:t};s.getBaiduNews(e,t,n)}else"医疗机构"==sessionStorage.getItem("userType")&&s.creatBaiduMap()},backTop(t){if(this.echartsData.length>1){console.log(t,this.arrayData);var e;e=this.arrayData.find(function(e){return e.name===t}),console.log(e);var a=e;if(this.$emit("mapData",a),"全国"==e.level)this.baiduIfMap=!1,this.creatEchart("中国","static/json/china.json",this.chainPath);else if("省级"==e.level&&"北京"!=t&&"上海"!=t&&"天津"!=t&&"重庆"!=t){this.baiduIfMap=!1;var s=e.path,i=this.provincePath,r={address:e.name};this.creatEchart(e.name,s,i,r)}else if("市级"==e.level||"北京"==t||"上海"==t||"天津"==t||"重庆"==t){if("济源市"==t)return;this.baiduIfMap=!1;s=e.path,i=this.cityPath,r={address:e.name};this.creatEchart(e.name,s,i,r)}var o=this.echartsData.indexOf(t)+1;this.echartsData.splice(o)}},creatEchart(t,e,a,s){this.getConfig={addressName:t,json:e,url:a,params:s},console.log("beijnqqqg",this.getConfig);var o=this;i.a.getJSON(e,function(e){console.log(e),r.registerMap(t,e);var i={trigger:"item",showDelay:0,transitionDuration:.5,formatter:function(t){var e=(t.value+"").split(".");return e=e[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,"),t.name+": "+e}},n={left:"left",inRange:{color:["#abd9e9","#74add1","#4575b4","#313695"]},text:["High","Low"],calculable:!0},l={show:!0,left:"left",top:"top",feature:{}},h={map:t,roam:!1,zoom:1.2,label:{normal:{show:!1,fontSize:"10",color:"rgba(0,0,0,0.7)"},emphasis:{fontSize:"14"}},itemStyle:{normal:{borderColor:"rgba(0, 0, 0, 0.2)"},emphasis:{areaColor:"#F3B329",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:20,borderWidth:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}};if(o.$ajax.get(a,{params:s}).then(function(e){if(console.log("地图",e),260==e.data.status){var a=[];if(e.data.list.length>1){for(var s=0;s<e.data.list.length;s++)a.push(e.data.list[s].value);a.sort(function(t,e){return t-e}),n.min=a[0],n.max=a[a.length-1]}else n.min=e.data.list[0].value/2,n.max=e.data.list[0].value;var r=o.arrayData.find(function(e){return e.name===t});o.$emit("mapData",r);var c={tooltip:i,visualMap:n,toolbox:l,geo:h,series:[{name:"",type:"map",geoIndex:0,data:e.data.list}]};-1==o.echartsData.indexOf(t)&&o.echartsData.push(t),console.log("option",c),setTimeout(function(){o.echartMap.setOption(c)},500)}else o.$message({type:"error",message:"当前区域暂无数据"})}),"/recovery/truckhospital/statisticCityPlasticWeight"==a||"/recovery/truckhospital/statisticCityGlassWeight"==a)for(var c=0;c<e.features.length;c++){let t={name:e.features[c].properties.name,path:"static/json/citys/"+e.features[c].id+".json",level:"市级"};o.arrayData.push(t)}else if("/recovery/truckhospital/statisticPlatPlasticWeight"==a||"/recovery/truckhospital/statisticPlatGlassWeight"==a)for(c=0;c<e.features.length;c++){let a={name:e.features[c].properties.name,father:t,level:"县级"};o.arrayData.push(a)}console.log(o.arrayData),o.echartMap.resize()}),window.addEventListener("resize",()=>{this.echartMap.resize()}),this.echartMap.off("click"),this.echartMap.on("click",function(t){var e;if(e=o.arrayData.find(function(e){return e.name===t.name}),console.log("123123123123123123123123123",e,o.echartsData),"省级"==e.level){var a=e.path,s=o.provincePath,i={address:e.name};o.creatEchart(e.name,a,s,i)}else if("市级"==e.level)if("济源市"==e.name){console.log(e);var r={name:e.name,level:e.level,father:o.echartsData[o.echartsData.length-1]};o.getBaiduNews(e.name,o.echartsData[o.echartsData.length-1],r)}else{a=e.path,s=o.cityPath,i={address:e.name,paddress:o.echartsData[o.echartsData.length-1]};o.creatEchart(e.name,a,s,i)}else"县级"==e.level&&(console.log("县级",o.echartsData),o.getBaiduNews(e.name,o.echartsData[1],e));console.log(o.arrayData)})},getBaiduNews(t,e,a){console.log(t,e,a);var s=this;this.$ajax.get(this.platPath,{params:{address:t,paddress:a.father}}).then(function(e){console.log("百度地图信息",e),260==e.data.status?(s.$emit("mapData",a),-1==s.echartsData.indexOf(t)&&s.echartsData.push(t),s.baiduIfMap=!0,s.makerDetail=e.data.list,s.mapLoad()):s.$message.error("当前区域无数据")})},mapLoad(){var t=this,e=new BMap.Map("baiDuMap",{enableMapClick:!1});e.enableScrollWheelZoom(!0);var a=this.echartsData[0]+this.echartsData[1]+"省"+this.echartsData[2];e.centerAndZoom(a,11);new BMap.Geocoder;for(var s=0;s<t.makerDetail.length;s++){var i="<h5 style='margin:0 0 5px 0;padding:0.1em 0;font-size:17px;'>"+t.makerDetail[s].name+"</h5><p style='margin:0;line-height:1.5;font-size:13px;padding:0 5px;'>回收总重量："+t.makerDetail[s].value+"kg</p>";r({lng:t.makerDetail[s].longitude,lat:t.makerDetail[s].latitude},i,t.makerDetail[s].id)}function r(a,s,i){!function(a,s,i){e.centerAndZoom(a,11);var r=new BMap.Marker(new BMap.Point(a.lng,a.lat));e.addOverlay(r),function(a,s,i){s.addEventListener("click",function(s){!function(a,s,i){var r={id:i};t.$emit("mapData",r),t.$ajax.get("/recovery/supervisionunit/selectByHospitalId",{params:{hospitalid:i}}).then(function(t){if(console.log("医院监管单位",t),260==t.data.status){a=a+"<p style='margin:0;line-height:1.5;font-size:13px;padding:0 5px;'>监管单位："+t.data.object.name+"</p>";var i=s.target,r=new BMap.Point(i.getPosition().lng,i.getPosition().lat),o=a,n=new BMap.InfoWindow(o);e.openInfoWindow(n,r)}})}(a,s,i)})}(s,r,i)}(a,s,i)}e.setMapStyle({style:"midnight"})},creatBaiduMap(){this.baiduIfMap=!0;var t=new BMap.Map("baiDuMap",{enableMapClick:!1});t.enableScrollWheelZoom(!0),t.setMapStyle({style:"midnight"});var e=new BMap.Geocoder,a=sessionStorage.getItem("userAddress");t.centerAndZoom(a,11),e.getPoint(a,function(e){e?function(e){t.centerAndZoom(e,11);var a=new BMap.Marker(new BMap.Point(e.lng,e.lat));t.addOverlay(a)}(e):alert("您选择地址没有解析到经纬度!")},"全国")}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mapBox"},[a("div",{staticClass:"suyin"},t._l(t.echartsData,function(e,s){return a("span",{key:s,on:{click:function(a){return t.backTop(e)}}},[t._v(t._s(e)+" ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.baiduIfMap,expression:"!baiduIfMap"}],attrs:{id:"mainId"}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.baiduIfMap,expression:"baiduIfMap"}],attrs:{id:"baiDuMap"}})])},staticRenderFns:[]};var l=a("VU/8")(o,n,!1,function(t){a("vYpU")},"data-v-5af8bd4c",null).exports,h=a("XLwt"),c={props:["flag","mapdata"],data:()=>({chainPath:"/recovery/truckhospital/statisticProvincePlasticWeight",provincePath:"/recovery/truckhospital/statisticCityPlasticWeight",cityPath:"/recovery/truckhospital/statisticPlatPlasticWeight",platPath:"/recovery/truckhospital/statisticHospitalPlasticWeight",hospitalPath:"/recovery/garbagebag/countGroupByDepartment",suliaoData:[],paramConfig:{url:null,val:null},ifIsShow:!0,title:""}),mounted(){var t,e;"国家管理单位"==sessionStorage.getItem("userType")?(t=this.chainPath,this.getBingData(t,sessionStorage.getItem("userAddress"))):"省管理单位"==sessionStorage.getItem("userType")&&"北京"!=sessionStorage.getItem("userAddress")&&"重庆"!=sessionStorage.getItem("userAddress")&&"天津"!=sessionStorage.getItem("userAddress")&&"上海"!=sessionStorage.getItem("userAddress")?(t=this.provincePath,e={name:sessionStorage.getItem("userAddress")},this.getBingData(t,e)):"市管理单位"==sessionStorage.getItem("userType")||"北京"==sessionStorage.getItem("userAddress")||"重庆"==sessionStorage.getItem("userAddress")||"天津"==sessionStorage.getItem("userAddress")||"上海"==sessionStorage.getItem("userAddress")?(t=this.cityPath,e="北京"==sessionStorage.getItem("userAddress")?{name:"北京"}:"重庆"==sessionStorage.getItem("userAddress")?{name:"重庆"}:"上海"==sessionStorage.getItem("userAddress")?{name:"上海"}:"天津"==sessionStorage.getItem("userAddress")?{name:"天津"}:{name:sessionStorage.getItem("userAddress")},this.getBingData(t,e)):"区管理单位"==sessionStorage.getItem("userType")?(t=this.platPath,e={name:sessionStorage.getItem("userAddress"),father:sessionStorage.getItem("userFatherAddress")},this.getBingData(t,e)):"医疗机构"==sessionStorage.getItem("userType")&&(t=this.hospitalPath,e={id:sessionStorage.getItem("belongId")},this.getBingData(t,e))},watch:{flag(t,e){var a;console.log(t,e),"玻璃"==t?(this.chainPath="/recovery/truckhospital/statisticProvinceGlassWeight",this.provincePath="/recovery/truckhospital/statisticCityGlassWeight",this.cityPath="/recovery/truckhospital/statisticPlatGlassWeight",this.platPath="/recovery/truckhospital/statisticHospitalGlassWeight"):(this.chainPath="/recovery/truckhospital/statisticProvincePlasticWeight",this.provincePath="/recovery/truckhospital/statisticCityPlasticWeight",this.cityPath="/recovery/truckhospital/statisticPlatPlasticWeight",this.platPath="/recovery/truckhospital/statisticHospitalPlasticWeight"),console.log(this.paramConfig.url),"/recovery/truckhospital/statisticCityPlasticWeight"==this.paramConfig.url||"/recovery/truckhospital/statisticCityGlassWeight"==this.paramConfig.url?(a=this.provincePath,this.getBingData(a,this.paramConfig.val)):"/recovery/truckhospital/statisticPlatPlasticWeight"==this.paramConfig.url||"/recovery/truckhospital/statisticPlatGlassWeight"==this.paramConfig.url?(a=this.cityPath,this.getBingData(a,this.paramConfig.val)):"/recovery/garbagebag/countGroupByDepartment"==this.paramConfig.url?a=this.cityPath:"/recovery/truckhospital/statisticProvinceGlassWeight"!=this.paramConfig.url&&"/recovery/truckhospital/statisticProvincePlasticWeight"!=this.paramConfig.url||(a=this.chainPath,this.getBingData(a,this.paramConfig.val))},mapdata:{handler:function(t,e){var a;console.log(t),"全国"==t.level?a=this.chainPath:"省级"==t.level?a=this.provincePath:"市级"==t.level?a=this.cityPath:"县级"==t.level?a=this.platPath:t.id&&(a=this.hospitalPath),this.getBingData(a,t)}}},methods:{getBingData(t,e){console.log("饼图",t,e),this.paramConfig={url:t,val:e},this.ifIsShow=!0;var a=this;"/recovery/truckhospital/statisticProvincePlasticWeight"==t||"/recovery/truckhospital/statisticProvinceGlassWeight"==t?this.$ajax.get(t).then(function(t){console.log("饼图数据",t),260==t.data.status?(a.suliaoData=t.data.list,a.title="各单位重量占比",a.creatEchart()):(a.suliaoData=[],a.ifIsShow=!1)}):"/recovery/truckhospital/statisticHospitalPlasticWeight"==t||"/recovery/truckhospital/statisticHospitalGlassWeight"==t?(console.log(sessionStorage.getItem("userAddress")),this.$ajax.get(t,{params:{address:e.name,paddress:e.father}}).then(function(t){console.log("饼图1数据",t),260==t.data.status?(a.suliaoData=t.data.list,a.title="各单位重量占比",a.creatEchart()):(a.suliaoData=[],a.ifIsShow=!1)})):"/recovery/garbagebag/countGroupByDepartment"==t?this.$ajax.get(t,{params:{hospitalid:e.id}}).then(function(t){console.log("饼图医疗机构数据",t),260==t.data.status?(a.suliaoData=t.data.list,a.title="各科室垃圾袋数占比",a.creatEchart()):(a.suliaoData=[],a.ifIsShow=!1)}):this.$ajax.get(t,{params:{address:e.name}}).then(function(t){console.log("饼图3数据",t),260==t.data.status?(a.suliaoData=t.data.list,a.title="各单位重量占比",a.creatEchart()):(a.suliaoData=[],a.creatEchart())})},creatEchart(){var t,e,a=h.init(document.getElementById("bing")),s=[],i=this.suliaoData;if(i.length>1){for(var r=0;r<i.length;r++)s.push(i[r].value);s.sort(function(t,e){return t-e}),t=s[0],e=s[s.length-1]}else t=i[0].value/2,e=i[0].value;a.setOption({backgroundColor:"transparent",title:{text:this.title,left:"center",top:30,textStyle:{fontSize:20,color:"#bbd9ff"}},tooltip:{trigger:"item",formatter:"{b} : {c} ({d}%)"},visualMap:{show:!1,left:"left",min:t,max:e,inRange:{color:["#abd9e9","#74add1","#4575b4","#313695"]},text:["High","Low"],calculable:!1},series:[{name:"访问来源",type:"pie",radius:"55%",center:["50%","60%"],data:i,label:{normal:{textStyle:{fontSize:15,color:"#bbd9ff"}}},itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}),window.addEventListener("resize",()=>{a.resize()})}}},d={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"bingBox"},[this.ifIsShow?e("div",{attrs:{id:"bing"}}):this._e()])},staticRenderFns:[]};var g=a("VU/8")(c,d,!1,function(t){a("q02W")},"data-v-785e8074",null).exports,p=a("XLwt"),u={props:["mainId","mapdata"],data:()=>({echartsData:[{name:0,value:(new Date).getFullYear()},{name:1,value:(new Date).getFullYear()-1},{name:2,value:(new Date).getFullYear()-2}],suliaoList:[],glassList:[],address:null,paddress:null,level:null,hospitalid:null,flag:0}),watch:{mapdata:{handler:function(t,e){this.address=null,this.paddress=null,this.level=null,this.hospitalid=null,console.log(t),"县级"==t.level?(this.address=t.name,this.paddress=t.father,this.level="区"):"全国"==t.level?(this.address=t.name,this.level=t.level):t.id?this.hospitalid=t.id:(this.address=t.name,this.level=t.level.substr(0,1)),this.getZheXianData(0)}}},mounted(){"医疗机构"==sessionStorage.getItem("userType")?this.hospitalid=sessionStorage.getItem("belongId"):"区管理单位"==sessionStorage.getItem("userType")?(this.address=sessionStorage.getItem("userAddress"),this.paddress=sessionStorage.getItem("userFatherAddress"),this.level=sessionStorage.getItem("addressLevel")):(this.address=sessionStorage.getItem("userAddress"),this.level=sessionStorage.getItem("addressLevel")),this.getZheXianData(0)},methods:{getZheXianData(t){this.flag=t,this.suliaoList=[],this.glassList=[],console.log(t);var e=this;this.$ajax.get("/recovery/statistics/yearWeightStatistics",{params:{address:this.address,paddress:this.paddress,level:this.level,flag:t,hospitalid:this.hospitalid}}).then(function(t){if(console.log("折线图数据",t),260==t.data.status){if(null!=t.data.plasticweight)for(var a=0;a<t.data.plasticweight.length;a++)e.suliaoList.push(t.data.plasticweight[a].value);else e.suliaoList=[];if(null!=t.data.glassweight)for(a=0;a<t.data.plasticweight.length;a++)e.glassList.push(t.data.glassweight[a].value);else e.glassList=[];e.creatEchart()}else e.suliaoList=[],e.glassList=[],e.creatEchart()})},creatEchart(){var t=function(){for(var t=[],e=1;e<=12;e++)t.push(e+"月");return t}();console.log(this.suliaoList);var e=p.init(document.getElementById("zhexianEchart"));e.setOption({backgroundColor:"rgba(27, 88, 167,.2)",title:{text:"回收总重量",left:"left",top:40,textStyle:{fontSize:20,color:"#bbd9ff"}},tooltip:{trigger:"axis",axisPointer:{type:"shadow",textStyle:{color:"#fff"}}},grid:{borderWidth:0,top:110,bottom:95,textStyle:{color:"#fff"}},legend:{x:"46%",top:"11%",textStyle:{color:"#bbd9ff",fontSize:15},data:["塑料","玻璃"]},calculable:!0,xAxis:[{type:"category",axisLine:{lineStyle:{color:"#bbd9ff"}},splitLine:{show:!1},axisTick:{show:!1},data:t}],yAxis:[{type:"value",splitLine:{show:!1},axisLine:{lineStyle:{color:"#bbd9ff"}}}],dataZoom:[{show:!0,height:15,xAxisIndex:[0],bottom:"8%",start:0,end:100,handleIcon:"path://M306.1,413c0,2.2-1.8,4-4,4h-59.8c-2.2,0-4-1.8-4-4V200.8c0-2.2,1.8-4,4-4h59.8c2.2,0,4,1.8,4,4V413z",handleSize:"110%",handleStyle:{color:"#5B3AAE"},textStyle:{color:"#bbd9ff"},fillerColor:"rgba(67,55,160,0.4)",borderColor:"rgba(204,187,225,0.5)"},{type:"inside",show:!0,height:15,start:1,end:35}],series:[{name:"玻璃",type:"line",symbolSize:10,symbol:"circle",itemStyle:{normal:{color:new p.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#248ff7"},{offset:1,color:"#6851f1"}]),barBorderRadius:11}},markPoint:{label:{normal:{textStyle:{color:"#fff"}}},data:[{type:"max",name:"最大值"},{type:"min",name:"最小值"}]},data:this.glassList},{name:"塑料",type:"line",symbolSize:10,symbol:"circle",itemStyle:{normal:{color:new p.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#f177c9"},{offset:1,color:"#c257F6"}]),barBorderRadius:11}},markPoint:{label:{normal:{textStyle:{color:"#fff"}}},data:[{type:"max",name:"最大值"},{type:"min",name:"最小值"}]},data:this.suliaoList}]}),window.addEventListener("resize",()=>{e.resize()})}}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"zhexianBox"},[a("div",{staticClass:"suyin"},t._l(t.echartsData,function(e,s){return a("span",{key:s,class:{active:t.flag==e.name},on:{click:function(e){return t.getZheXianData(s)}}},[t._v(t._s(e.value)+" ")])}),0),t._v(" "),a("div",{attrs:{id:"zhexianEchart"}})])},staticRenderFns:[]};var m=a("VU/8")(u,v,!1,function(t){a("ZvwH")},"data-v-5adde3fe",null).exports,f=a("XLwt"),y={props:["mainId","mapdata"],data:()=>({echartsData:[(new Date).getFullYear(),(new Date).getFullYear()-1,(new Date).getFullYear()-2],suliaoList:[],glassList:[],address:null,paddress:null,level:null,hospitalid:null,flag:(new Date).getFullYear()}),watch:{mapdata:{handler:function(t,e){console.log("柱状",t),this.address=null,this.paddress=null,this.level=null,this.hospitalid=null,"县级"==t.level?(this.address=t.name,this.paddress=t.father,this.level="区"):"全国"==t.level?(this.address=t.name,this.level=t.level):t.id?this.hospitalid=t.id:(this.address=t.name,this.level=t.level.substr(0,1)),this.getZhuzhuangData(0)}}},mounted(){"医疗机构"==sessionStorage.getItem("userType")?this.hospitalid=sessionStorage.getItem("belongId"):"区管理单位"==sessionStorage.getItem("userType")?(this.address=sessionStorage.getItem("userAddress"),this.paddress=sessionStorage.getItem("userFatherAddress"),this.level=sessionStorage.getItem("addressLevel")):(this.address=sessionStorage.getItem("userAddress"),this.level=sessionStorage.getItem("addressLevel")),this.getZhuzhuangData(0)},methods:{getZhuzhuangData(t){this.suliaoList=[],this.glassList=[];var e=this;this.$ajax.get("/recovery/statistics/yearNumbertistics",{params:{address:this.address,paddress:this.paddress,level:this.level,hospitalid:this.hospitalid,flag:t}}).then(function(t){if(console.log("柱状数据",t),260==t.data.status){if(null!=t.data.plasticnumber)for(var a=0;a<t.data.plasticnumber.length;a++)e.suliaoList.push(t.data.plasticnumber[a].value);else e.suliaoList=[];if(null!=t.data.glassnumber)for(a=0;a<t.data.glassnumber.length;a++)e.glassList.push(t.data.glassnumber[a].value);else e.glassList=[];e.creatEchart()}})},creatEchart(){var t=function(){for(var t=[],e=1;e<=12;e++)t.push(e+"月");return t}(),e=f.init(document.getElementById("zhuMap"));e.setOption({backgroundColor:"rgba(27, 88, 167,.2)",title:{text:"可追溯垃圾袋数量",left:"left",top:40,textStyle:{fontSize:20,color:"#bbd9ff"}},tooltip:{trigger:"axis",axisPointer:{type:"shadow",textStyle:{color:"#fff"}}},grid:{borderWidth:0,top:110,bottom:95,textStyle:{color:"#fff"}},legend:{data:["塑料","玻璃"],x:"46%",top:"11%",textStyle:{color:"#bbd9ff",fontSize:15}},calculable:!0,xAxis:{type:"category",data:t,axisLine:{lineStyle:{color:"#bbd9ff"}},splitLine:{show:!1},axisTick:{show:!1}},yAxis:{type:"value",splitLine:{show:!1},axisLine:{lineStyle:{color:"#bbd9ff"}},axisLabel:{}},dataZoom:[{show:!0,height:15,xAxisIndex:[0],bottom:"8%",start:0,end:100,handleIcon:"path://M306.1,413c0,2.2-1.8,4-4,4h-59.8c-2.2,0-4-1.8-4-4V200.8c0-2.2,1.8-4,4-4h59.8c2.2,0,4,1.8,4,4V413z",handleSize:"110%",handleStyle:{color:"#5B3AAE"},textStyle:{color:"#bbd9ff"},fillerColor:"rgba(67,55,160,0.4)",borderColor:"rgba(204,187,225,0.5)"},{type:"inside",show:!0,height:15,start:1,end:35}],series:[{name:"塑料",type:"bar",barWidth:"20%",itemStyle:{normal:{color:new f.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#f177c9"},{offset:1,color:"#c257F6"}]),barBorderRadius:11}},data:this.suliaoList},{name:"玻璃",type:"bar",barWidth:"20%",itemStyle:{normal:{color:new f.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#248ff7"},{offset:1,color:"#6851f1"}]),barBorderRadius:11}},data:this.glassList}]}),window.addEventListener("resize",()=>{e.resize()})}}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"zhuzhuang"},[a("div",{staticClass:"suyin"},t._l(t.echartsData,function(e,s){return a("span",{key:s,class:{active:t.flag==e},on:{click:function(e){return t.getZhuzhuangData(s)}}},[t._v(t._s(e)+" ")])}),0),t._v(" "),a("div",{attrs:{id:"zhuMap"}})])},staticRenderFns:[]};var j={components:{echartMap:l,bingMap:g,zhuzhuang:a("VU/8")(y,b,!1,function(t){a("oiNC")},"data-v-e92979f8",null).exports,zhexian:m},computed:{classOption:()=>({singleHeight:57,waitTime:2e3,step:.5,hoverStop:!1})},data:()=>({flag:"塑料",hospitalIf:!0,hospitalnum:"10",glassweight:"28837",plasticweight:"25326",list:[],mapData:[]}),mounted(){var t;"医疗机构"==sessionStorage.getItem("userType")?(this.hospitalIf=!1,t={hospitalid:sessionStorage.getItem("belongId")}):t={address:sessionStorage.getItem("userAddress"),paddress:sessionStorage.getItem("userFatherAddress"),level:sessionStorage.getItem("addressLevel")},this.getFourData(t)},methods:{tabType(t){this.flag=t},getMapData(t){if(this.mapData=t,this.hospitalIf=!0,console.log("ishadkjaksjdkjak",t),"县级"==t.level)var e={address:t.name,paddress:t.father,level:"区"};else if("全国"==t.level)e={address:t.name,level:t.level};else if(t.id){e={hospitalid:t.id};this.hospitalIf=!1}else e={address:t.name,level:t.level.substr(0,1)};this.getFourData(e)},getFourData(t){var e=this;this.$ajax.get("/recovery/statistics/numberStatistics",{params:t}).then(function(t){console.log("统计信息",t),260==t.data.status&&(e.hospitalnum=t.data.hospitalnum,e.glassweight=t.data.glassweight,e.plasticweight=t.data.plasticweight)}),this.$ajax.get("/recovery/statistics/newData",{params:t}).then(function(t){console.log("最新列表",t),260==t.data.status&&(e.list=t.data.list)})}}},P={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"bigpageBox"}},[a("div",{staticClass:"pageTitle"},[a("span",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.$router.go(-1)}}},[t._v("输液瓶（袋）回收溯源系统")])]),t._v(" "),t.hospitalIf?a("div",{staticClass:"tabBox"},[a("span",{class:{active:"塑料"==t.flag},on:{click:function(e){return t.tabType("塑料")}}},[t._v("塑料")]),t._v(" "),a("span",{class:{active:"玻璃"==t.flag},on:{click:function(e){return t.tabType("玻璃")}}},[t._v("玻璃")])]):t._e(),t._v(" "),a("div",{staticClass:"contentBox"},[a("div",{attrs:{id:"pieMap1"}},[a("bingMap",{attrs:{flag:t.flag,mapdata:t.mapData}})],1),t._v(" "),a("div",{attrs:{id:"mapBox"}},[a("echartMap",{attrs:{flag:t.flag},on:{mapData:t.getMapData}})],1),t._v(" "),a("div",{staticClass:"allData"},[a("div",{staticClass:"fourData"},[a("div",[t.hospitalIf?a("p",[t._v("医疗机构总数")]):t._e(),t._v(" "),t.hospitalIf?t._e():a("p",[t._v("科室总数")]),t._v(" "),a("P",[t._v(t._s(t.hospitalnum))])],1),t._v(" "),a("div",[a("p",[t._v("塑料总量（千克）")]),t._v(" "),a("P",[t._v(t._s(t.plasticweight))])],1),t._v(" "),a("div",[a("p",[t._v("玻璃总量（千克）")]),t._v(" "),a("P",[t._v(t._s(t.glassweight))])],1),t._v(" "),a("div",[a("p",[t._v("CO2减排量（吨）")]),t._v(" "),a("P",[t._v(t._s(Math.round(t.plasticweight/1e3*.032*100)/100))])],1)]),t._v(" "),a("div",{staticClass:"dataList"},[a("vue-seamless-scroll",{staticClass:"table-content",attrs:{data:t.list,"class-option":t.classOption}},[a("ul",t._l(t.list,function(e,s){return a("li",{key:s},[t._v("\n                    "+t._s(e.hospital.name)+"运走塑料："+t._s(e.plasticweight)+"kg 玻璃："+t._s(e.glassweight)+"kg\n              ")])}),0)])],1)]),t._v(" "),a("div",{attrs:{id:"pieMap"}},[a("zhuzhuang",{attrs:{mapdata:t.mapData}})],1),t._v(" "),a("div",{attrs:{id:"lineMap"}},[a("zhexian",{attrs:{mapdata:t.mapData}})],1)])])},staticRenderFns:[]};var D=a("VU/8")(j,P,!1,function(t){a("2FtQ")},"data-v-d15282ba",null);e.default=D.exports}});
//# sourceMappingURL=1.d8a40133c49a0ac777a2.js.map